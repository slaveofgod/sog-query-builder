!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.sogqb=e()}(this,function(){!function(){for(var t={},e=["Array","Object","Function","Date","RegExp","Float32Array"],i=0;i<e.length;i++)t["[object "+e[i]+"]"]=e[i].toLowerCase()}();var s={version:"0.0.1",revision:"a6ace94",config:{},common:{},themes:{},registerTheme:function(e){var t=new[e][0]({},{},!0),i=t.alias;if(void 0===i)throw new Error('The theme has to have "alias" property');if("AbstractTheme"!==t.base)throw new Error('The theme has to extend "sogqb.AbstractTheme" abstract class');if(void 0===t.__draw)throw new Error('The theme has to implement "__draw" method');if(!1===sogv.isType("string",i)&&!1===sogv.isType("array",i))throw new Error('The alias must be type of "string" or "array", "'+sogv.getType(i)+'" given');"string"==typeof i&&(i=[i]),i.forEach(function(t){void 0===s.themes[e]&&(s.themes[t]=e)})},makeTheme:function(t,e,i,n){if(void 0===s.themes[t])throw new Error('Theme with alias "'+t+'" is not registered.');return new s.themes[t](e,i,n)},makeScheme:function(t){return new s.Scheme(t)},validateContainer:function(t){var e=sogv.isValidWithErrorMessage(t,"required|string|length:5,255");if(null!==e)throw new Error("Container: "+e);return!0},validateEntity:function(t){var e=sogv.isValidWithErrorMessage(t,"required|string|length:2,50");if(null!==e)throw new Error("Entity: "+e);return!0},validateState:function(t,e){}};function t(t,e,i){this.__options=t||{},this.__internal=!0===i,(this.__skipDrawing=!1)===this.__internal&&this.__validateOptions(e),this.name="AbstractTheme",this.base="AbstractTheme"}function e(t){this.__scheme=t||null,null!==this.__scheme&&this.__validate(),this.name="Scheme"}function i(t,e,i,n,r){this.__container=t||null,this.__entity=e||null,this.__scheme=i||null,this.__state=n||null,this.__theme=r||"material",s.validateContainer(this.__container),s.validateEntity(this.__entity),s.validateState(this.__state);var a=this;this.setScheme(this.__scheme),this.setTheme(this.__theme),this.name="Application",window.addEventListener("resize",function(){a.update()})}function n(t,e,i){s.AbstractTheme.call(this,t,{container:e.container||"required|string|length:5,255"},i),this.__queryButton='<div class="query" contentEditable=true data-text="Searching Filter"></div>',this.__searchButton='<button class="btn btn-default waves-effect btn-super-sm float-right search"><i class="zmdi zmdi-search"></i></button>',this.__clearButton='<button class="btn btn-default waves-effect btn-super-sm float-right clear"><i class="zmdi zmdi-close"></i></button>',this.container=this.__options.container,this.cssStyles=this.__prepareCssStyles("#%%container%%{height:36px;border:1px solid #5E5E5E;font-size:16px;}#%%container%% .query{height:34px;float:left;width:10px;padding:4px 0 4px 6px;}#%%container%% button.float-left{margin:3px 0 3px 3px;float:left;}#%%container%% button.float-right{margin:3px 3px 3px 0;float:right;}#%%container%% .btn-group-sm > .btn, .btn-super-sm{padding:3px 10px;font-size:14px;line-height:1.5;border-radius:2px;text-transform:none;}#%%container%% [contentEditable=true]:empty:not(:focus):before{content:attr(data-text);opacity:.5;}"),this.name="MaterialTheme"}return"undefined"!=typeof exports&&(exports.sogqb=s),Object.assign(s,(Object.assign(t.prototype,{draw:function(){this.__beforeDraw(),!1===this.__skipDrawing&&(console.info('Drawing this container with the id "'+this.container+'" ...'),this.__draw()),this.__afterDraw()},update:function(){console.info('Updating this container with the id "'+this.container+'" ...');var t=document.getElementById(this.container),e=t.clientWidth-10;t.childNodes.forEach(function(t){!1===t.classList.contains("query")&&(e-=t.clientWidth)}),t.querySelector(".query").style.width=e+"px"},__draw:function(){throw new Error('The theme has to implement "__draw" method')},__beforeDraw:function(){null===document.getElementById(this.container)&&(this.__skipDrawing=!0,console.info('This container with the id "'+this.container+'" does not exist.'))},__afterDraw:function(){},__validateOptions:function(t){if(null!=t)for(var e in t)if(t.hasOwnProperty(e)){var i=sogv.isValidWithErrorMessage(this.__options[e],t[e],!0);if(null!==i)throw new Error("[option:"+e+"]: "+i)}},__prepareCssStyles:function(t){var e={container:this.container};for(var i in e)e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%%"+i+"%%","gm"),e[i]));return t},__buildStyleElement:function(){var t=document.getElementById(this.container),e=document.createElement("style");e.innerHTML=this.cssStyles,t.appendChild(e)},__buildContainerElement:function(){var t=document.getElementById(this.container),e=this.__buildElement("query"),i=this.__buildElement("search"),n=this.__buildElement("clear");t.appendChild(e),t.appendChild(i),t.appendChild(n),this.update()},__buildElement:function(t){var e=document.createElement("template"),i="";switch(t){case"query":i=this.__queryButton.trim();break;case"search":i=this.__searchButton.trim();break;case"clear":i=this.__clearButton.trim()}return e.innerHTML=i,e.content.firstChild}}),{AbstractTheme:t})),Object.assign(s,(e.prototype.constructor=e,Object.defineProperties(e.prototype,{scheme:{get:function(){return this.__scheme}}}),Object.assign(e.prototype,{__validate:function(){for(var t=0;t<this.__scheme.length;t++)this.__validateEntity(this.__scheme[t].entity),this.__validateColumns(this.__scheme[t].columns);return!0},__validateEntity:function(t){var e=sogv.isValidWithErrorMessage(t,"required|string|alpha-dash|length:2,50");if(null!==e)throw new Error("Entity: ["+t+"] "+e);return!0},__validateColumns:function(t){var e=sogv.isValidWithErrorMessage(t,"required|array|between:1,1000");if(null!==e)throw new Error("Columns: "+e);return t.forEach(function(t){var e=new sogv.Application({lang:"en"}),i={name:t.name,title:t.title,type:t.type,data:t.data},n=e.make(i,{name:"required|string|alpha-dash|length:2,50",title:"required|string|print|length:2,100",type:"required|in:email;integer;numeric;string;date",data:"object"});if(!1===n.isValid())for(var r in i)if(i.hasOwnProperty(r)&&!1===n.get(r).isValid())throw new Error("Column '"+r+"' = '"+i[r]+"': "+n.get(r).errors().first())}),!0}}),{Scheme:e})),Object.assign(s,(i.prototype.constructor=i,Object.defineProperties(i.prototype,{container:{get:function(){return this.__container}},entity:{get:function(){return this.__entity}},scheme:{get:function(){return this.__scheme}},state:{get:function(){return this.__state}},theme:{get:function(){return this.__theme}}}),Object.assign(i.prototype,{setScheme:function(t){this.__scheme=s.makeScheme(t)},setState:function(t){s.validateState(t,"required"),this.__state=t},setTheme:function(t){this.__theme=s.makeTheme(t,{container:this.container},{})},draw:function(){this.__theme.draw()},update:function(){this.__theme.update()}}),{Application:i})),Object.assign(s,((n.prototype=Object.create(s.AbstractTheme.prototype)).constructor=n,Object.defineProperty(n.prototype,"alias",{get:function(){return["material"]}}),Object.assign(n.prototype,{__draw:function(){this.__buildStyleElement(),this.__buildContainerElement()}}),{MaterialTheme:n})),s.registerTheme(s.MaterialTheme),s});